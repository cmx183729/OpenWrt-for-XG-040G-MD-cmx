去重后 AN7581 (XG-040G-MD) OpenWrt 编译配置
 
核心目标平台
 
CONFIG_TARGET_airoha=y
CONFIG_TARGET_airoha_an7581=y
CONFIG_TARGET_airoha_an7581_DEVICE_nokia_bell_xg-040g-md=y
CONFIG_ARCH_64BIT=y
CONFIG_aarch64=y
CONFIG_LINUX_6_12=y
#CONFIG_MODULES=y
#CONFIG_HAVE_DOT_CONFIG=y
#CONFIG_HOST_OS_LINUX=y
#CONFIG_HAS_SUBTARGETS=y
#CONFIG_HAS_DEVICES=y
 
Airoha 硬件专属驱动/固件
 
CONFIG_PACKAGE_airoha-en7581-npu-firmware=y
CONFIG_PACKAGE_kmod-phy-airoha-en8811h=y
CONFIG_PACKAGE_kmod-i2c-an7581=y
 
最小系统核心组件（不可删减）
 
CONFIG_DEFAULT_base-files=y
CONFIG_DEFAULT_busybox=y
CONFIG_DEFAULT_ca-bundle=y
CONFIG_DEFAULT_logd=y
CONFIG_DEFAULT_procd=y
CONFIG_DEFAULT_uci=y
CONFIG_DEFAULT_urandom-seed=y
CONFIG_DEFAULT_urngd=y
CONFIG_DEFAULT_netifd=y
CONFIG_DEFAULT_mtd=y
CONFIG_DEFAULT_fstools=y
CONFIG_DEFAULT_block-mount=y
CONFIG_DEFAULT_libc=y
CONFIG_DEFAULT_libgcc=y
CONFIG_PACKAGE_uboot-envtools=y
CONFIG_PACKAGE_uclient-fetch=y
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y
CONFIG_PACKAGE_kmod-leds-gpio=y
CONFIG_PACKAGE_ubi-utils=y
 
根文件系统配置
 
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256
CONFIG_TARGET_SQUASHFS_BLOCK_READERS=4
CONFIG_TARGET_SQUASHFS_SMALL_READERS=4
CONFIG_TARGET_UBIFS_FREE_SPACE_FIXUP=y
CONFIG_TARGET_UBIFS_JOURNAL_SIZE=""
CONFIG_MTD_UBI=y
CONFIG_UBIFS_FS=y
CONFIG_FSTOOLS_UBIFS_EXTROOT=y
CONFIG_TARGET_ROOTFS_PARTSIZE=512
 
网络基础栈（IPv4/IPv6）
 
CONFIG_IPV6=y
CONFIG_PACKAGE_dnsmasq=y
CONFIG_DEFAULT_odhcp6c=y
CONFIG_DEFAULT_odhcpd-ipv6only=y
CONFIG_PACKAGE_nftables=y
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_kmod-nfnetlink=y
CONFIG_PACKAGE_kmod-nft-core=y
CONFIG_PACKAGE_kmod-nft-nat=y
CONFIG_PACKAGE_kmod-nf-flow=y
CONFIG_PACKAGE_kmod-nft-offload=y
CONFIG_PACKAGE_ethtool-full=y
 
包管理器（apk）
 
CONFIG_PACKAGE_apk=y
CONFIG_DEFAULT_apk-tools=y
CONFIG_PACKAGE_apk-mbedtls=y
CONFIG_DEFAULT_openwrt-keyring=y
 
PPPoE 拨号支持
 
CONFIG_PACKAGE_ppp=y
CONFIG_PACKAGE_ppp-mod-pppoe=y
 
SSH 远程管理（Dropbear 轻量版）
 
CONFIG_PACKAGE_dropbear=y
CONFIG_DROPBEAR_SMALL_CODE=y
CONFIG_DROPBEAR_ED25519=y
CONFIG_DROPBEAR_CURVE25519=y
CONFIG_PACKAGE_openssh-sftp-server=y
 
USB 全功能支持（2.0/3.0/存储）
 
CONFIG_USB_SUPPORT=y
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-xhci-hcd=y
CONFIG_PACKAGE_kmod-usb-xhci-mtk=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y
 
文件系统（含 Extroot 扩展）
 
CONFIG_PACKAGE_fitblk=y
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_kmod-fs-vfat=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ext4=y
 
Web 管理界面（LuCI 中文+HTTPS）
 
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-ssl=y
CONFIG_LUCI_LANG_zh_Hans=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
 
核心插件（用户自定义）
 
Passwall
 
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
 
Lucky
 
CONFIG_PACKAGE_luci-app-lucky=y
CONFIG_PACKAGE_luci-i18n-lucky-zh-cn=y
 
rtp2httpd
 
CONFIG_PACKAGE_luci-app-rtp2httpd=y
 
性能优化（512M 内存必备）
 
CONFIG_PACKAGE_zram-swap=y
CONFIG_PACKAGE_kmod-tcp-bbr=y
 
常用工具/实用组件
 
CONFIG_PACKAGE_umdns=y
CONFIG_PACKAGE_kmod-mtd-rw=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_fwtool=y
CONFIG_PACKAGE_bash=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
